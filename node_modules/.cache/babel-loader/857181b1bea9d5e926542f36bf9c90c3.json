{"ast":null,"code":"import { fetchPolicies, fetchErrors } from \"./index\";\nimport axios from \"axios\";\nconst initialState = {\n  policiesData: {},\n  error: \"\"\n};\nconst token = \"eyJhbGciOiJIUzI1NiJ9.eyJ1aWQiOjU0MDAxNTAsInNpZCI6MTI3OTA2LCJleHAiOjE2Mzk0OTE2NzUsInR5cCI6NCwibG9rIjoiMDAwMCIsInRvayI6InU1dmZhNjJzQWd3OWxCSmc2LWJoUVEifQ.-SxwINzK1328MLuqqTiZjrURw9B9z3qJMzvJ54UQlbQ\";\nconst policyReducer = {\n  name: \"policies\",\n  reducer: function () {\n    let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    let action = arguments.length > 1 ? arguments[1] : undefined;\n\n    switch (action.type) {\n      case \"FETCH_POLICIES\":\n        return {\n          policiesData: action.payload,\n          error: \"\"\n        };\n\n      case \"FETCH_ERRORS\":\n        return {\n          policiesData: {},\n          error: action.payload\n        };\n\n      default:\n        return state;\n    }\n  },\n  selectPolicies: state => state.policies,\n  doFetchPolicies: () => _ref => {\n    let {\n      dispatch\n    } = _ref;\n    axios.get(\"https://api.learnyst.com/admin/v4/pages?type=2\", {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    }).then(response => {\n      const policies = response.data;\n      console.log(\"Got the data:- \", policies);\n      dispatch(fetchPolicies(policies));\n    }).catch(error => {\n      const errorMsg = error.message;\n      console.log(\"Got the error:- \", errorMsg);\n      dispatch(fetchErrors(errorMsg));\n    });\n  },\n  init: store => {\n    store.doFetchPolicies();\n    store.selectPolicies();\n  }\n};\nexport default policyReducer;","map":{"version":3,"sources":["/Users/learnyst/Desktop/Practice_Website_Builder/web-build-ui-v1/src/bundles/Policies.ts"],"names":["fetchPolicies","fetchErrors","axios","initialState","policiesData","error","token","policyReducer","name","reducer","state","action","type","payload","selectPolicies","policies","doFetchPolicies","dispatch","get","headers","Authorization","then","response","data","console","log","catch","errorMsg","message","init","store"],"mappings":"AAAA,SAASA,aAAT,EAAwBC,WAAxB,QAA2C,SAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,YAAY,EAAE,EADK;AAEnBC,EAAAA,KAAK,EAAE;AAFY,CAArB;AAUA,MAAMC,KAAK,GAAG,qMAAd;AAGA,MAAMC,aAAa,GAAG;AACpBC,EAAAA,IAAI,EAAE,UADc;AAGpBC,EAAAA,OAAO,EAAE,YAA0C;AAAA,QAAzCC,KAAyC,uEAAjCP,YAAiC;AAAA,QAAnBQ,MAAmB;;AACjD,YAAQA,MAAM,CAACC,IAAf;AACE,WAAK,gBAAL;AACE,eAAO;AACLR,UAAAA,YAAY,EAAEO,MAAM,CAACE,OADhB;AAELR,UAAAA,KAAK,EAAE;AAFF,SAAP;;AAKF,WAAK,cAAL;AACE,eAAO;AACLD,UAAAA,YAAY,EAAE,EADT;AAELC,UAAAA,KAAK,EAAEM,MAAM,CAACE;AAFT,SAAP;;AAKF;AACE,eAAOH,KAAP;AAdJ;AAgBD,GApBmB;AAsBpBI,EAAAA,cAAc,EAAGJ,KAAD,IAAiCA,KAAK,CAACK,QAtBnC;AAwBpBC,EAAAA,eAAe,EACb,MACA,QAAuB;AAAA,QAAtB;AAAEC,MAAAA;AAAF,KAAsB;AACrBf,IAAAA,KAAK,CACFgB,GADH,CACO,gDADP,EACyD;AACrDC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,YAAYd;AADpB;AAD4C,KADzD,EAMGe,IANH,CAMSC,QAAD,IAAc;AAClB,YAAMP,QAAQ,GAAGO,QAAQ,CAACC,IAA1B;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BV,QAA/B;AACAE,MAAAA,QAAQ,CAACjB,aAAa,CAACe,QAAD,CAAd,CAAR;AACD,KAVH,EAWGW,KAXH,CAWUrB,KAAD,IAAW;AAChB,YAAMsB,QAAQ,GAAGtB,KAAK,CAACuB,OAAvB;AACAJ,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCE,QAAhC;AACAV,MAAAA,QAAQ,CAAChB,WAAW,CAAC0B,QAAD,CAAZ,CAAR;AACD,KAfH;AAgBD,GA3CiB;AA6CpBE,EAAAA,IAAI,EAAGC,KAAD,IAAwE;AAC5EA,IAAAA,KAAK,CAACd,eAAN;AACAc,IAAAA,KAAK,CAAChB,cAAN;AACD;AAhDmB,CAAtB;AAmDA,eAAeP,aAAf","sourcesContent":["import { fetchPolicies, fetchErrors } from \"./index\";\nimport axios from \"axios\";\n\nconst initialState = {\n  policiesData: {},\n  error: \"\",\n};\n\ninterface Action {\n  type: string;\n  payload?: any;\n}\n\nconst token = \"eyJhbGciOiJIUzI1NiJ9.eyJ1aWQiOjU0MDAxNTAsInNpZCI6MTI3OTA2LCJleHAiOjE2Mzk0OTE2NzUsInR5cCI6NCwibG9rIjoiMDAwMCIsInRvayI6InU1dmZhNjJzQWd3OWxCSmc2LWJoUVEifQ.-SxwINzK1328MLuqqTiZjrURw9B9z3qJMzvJ54UQlbQ\"\n\n\nconst policyReducer = {\n  name: \"policies\",\n\n  reducer: (state = initialState, action: Action) => {\n    switch (action.type) {\n      case \"FETCH_POLICIES\":\n        return {\n          policiesData: action.payload,\n          error: \"\",\n        };\n\n      case \"FETCH_ERRORS\":\n        return {\n          policiesData: {},\n          error: action.payload,\n        };\n\n      default:\n        return state;\n    }\n  },\n\n  selectPolicies: (state: { policies: object }) => state.policies,\n\n  doFetchPolicies:\n    () =>\n    ({ dispatch }: any) => {\n      axios\n        .get(\"https://api.learnyst.com/admin/v4/pages?type=2\", {\n          headers: {\n            Authorization: 'Bearer ' + token\n          }\n        })\n        .then((response) => {\n          const policies = response.data;\n          console.log(\"Got the data:- \", policies);\n          dispatch(fetchPolicies(policies));\n        })\n        .catch((error) => {\n          const errorMsg = error.message;\n          console.log(\"Got the error:- \", errorMsg);\n          dispatch(fetchErrors(errorMsg));\n        });\n    },\n\n  init: (store: { doFetchPolicies: () => void; selectPolicies: () => void }) => {\n    store.doFetchPolicies();\n    store.selectPolicies();\n  },\n};\n\nexport default policyReducer;\n"]},"metadata":{},"sourceType":"module"}