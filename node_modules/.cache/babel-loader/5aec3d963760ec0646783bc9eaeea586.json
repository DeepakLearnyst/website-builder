{"ast":null,"code":"import { fetchPolicies, fetchErrors } from \"./index\";\nimport axios from \"axios\";\nconst initialState = {\n  policiesData: {},\n  error: \"\"\n};\nconst token = \"eyJhbGciOiJIUzI1NiJ9.eyJ1aWQiOjU0MDAxNTAsInNpZCI6MTI3OTA2LCJleHAiOjE2Mzk0OTE2NzUsInR5cCI6NCwibG9rIjoiMDAwMCIsInRvayI6InU1dmZhNjJzQWd3OWxCSmc2LWJoUVEifQ.-SxwINzK1328MLuqqTiZjrURw9B9z3qJMzvJ54UQlbQ\";\nconst policyReducer = {\n  name: \"policies\",\n  reducer: function () {\n    let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    let action = arguments.length > 1 ? arguments[1] : undefined;\n\n    switch (action.type) {\n      case \"FETCH_POLICIES\":\n        console.log(\"We are fetching the policies:- \", action);\n        return {\n          policiesData: action.payload,\n          error: \"\"\n        };\n\n      case \"FETCH_ERRORS\":\n        console.log(\"We are fetching the errors:- \", action);\n        return {\n          policiesData: {},\n          error: action.payload\n        };\n\n      default:\n        return state;\n    }\n  },\n  selectPolicies: state => {\n    console.log(\"State:- \", state);\n    console.log(\"policies:- \", state.policies);\n    return state.policies;\n  },\n  doFetchPolicies: () => _ref => {\n    let {\n      dispatch\n    } = _ref;\n    axios.get(\"https://api.learnyst.com/admin/v4/pages?type=2\", {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    }).then(response => {\n      const policies = response.data;\n      console.log(\"Got the data:- \", policies);\n      dispatch(fetchPolicies(policies));\n    }).catch(error => {\n      const errorMsg = error.message;\n      console.log(\"Got the error:- \", errorMsg);\n      dispatch(fetchErrors(errorMsg));\n    });\n  },\n  init: store => {\n    store.doFetchPolicies();\n    store.selectPolicies();\n  }\n};\nexport default policyReducer;","map":{"version":3,"sources":["/Users/learnyst/Desktop/Practice_Website_Builder/web-build-ui-v1/src/bundles/Policies.ts"],"names":["fetchPolicies","fetchErrors","axios","initialState","policiesData","error","token","policyReducer","name","reducer","state","action","type","console","log","payload","selectPolicies","policies","doFetchPolicies","dispatch","get","headers","Authorization","then","response","data","catch","errorMsg","message","init","store"],"mappings":"AAAA,SAASA,aAAT,EAAwBC,WAAxB,QAA2C,SAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,YAAY,EAAE,EADK;AAEnBC,EAAAA,KAAK,EAAE;AAFY,CAArB;AAUA,MAAMC,KAAK,GAAG,qMAAd;AAGA,MAAMC,aAAa,GAAG;AACpBC,EAAAA,IAAI,EAAE,UADc;AAGpBC,EAAAA,OAAO,EAAE,YAA0C;AAAA,QAAzCC,KAAyC,uEAAjCP,YAAiC;AAAA,QAAnBQ,MAAmB;;AACjD,YAAQA,MAAM,CAACC,IAAf;AACE,WAAK,gBAAL;AACEC,QAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ,EAA+CH,MAA/C;AACA,eAAO;AACLP,UAAAA,YAAY,EAAEO,MAAM,CAACI,OADhB;AAELV,UAAAA,KAAK,EAAE;AAFF,SAAP;;AAKF,WAAK,cAAL;AACEQ,QAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6CH,MAA7C;AACA,eAAO;AACLP,UAAAA,YAAY,EAAE,EADT;AAELC,UAAAA,KAAK,EAAEM,MAAM,CAACI;AAFT,SAAP;;AAKF;AACE,eAAOL,KAAP;AAhBJ;AAkBD,GAtBmB;AAwBpBM,EAAAA,cAAc,EAAGN,KAAD,IAAiC;AAC/CG,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBJ,KAAxB;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BJ,KAAK,CAACO,QAAjC;AACA,WAAOP,KAAK,CAACO,QAAb;AAAuB,GA3BL;AA6BpBC,EAAAA,eAAe,EACb,MACA,QAAuB;AAAA,QAAtB;AAAEC,MAAAA;AAAF,KAAsB;AACrBjB,IAAAA,KAAK,CACFkB,GADH,CACO,gDADP,EACyD;AACrDC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,YAAYhB;AADpB;AAD4C,KADzD,EAMGiB,IANH,CAMSC,QAAD,IAAc;AAClB,YAAMP,QAAQ,GAAGO,QAAQ,CAACC,IAA1B;AACAZ,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BG,QAA/B;AACAE,MAAAA,QAAQ,CAACnB,aAAa,CAACiB,QAAD,CAAd,CAAR;AACD,KAVH,EAWGS,KAXH,CAWUrB,KAAD,IAAW;AAChB,YAAMsB,QAAQ,GAAGtB,KAAK,CAACuB,OAAvB;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCa,QAAhC;AACAR,MAAAA,QAAQ,CAAClB,WAAW,CAAC0B,QAAD,CAAZ,CAAR;AACD,KAfH;AAgBD,GAhDiB;AAkDpBE,EAAAA,IAAI,EAAGC,KAAD,IAAwE;AAC5EA,IAAAA,KAAK,CAACZ,eAAN;AACAY,IAAAA,KAAK,CAACd,cAAN;AACD;AArDmB,CAAtB;AAwDA,eAAeT,aAAf","sourcesContent":["import { fetchPolicies, fetchErrors } from \"./index\";\nimport axios from \"axios\";\n\nconst initialState = {\n  policiesData: {},\n  error: \"\",\n};\n\ninterface Action {\n  type: string;\n  payload?: any;\n}\n\nconst token = \"eyJhbGciOiJIUzI1NiJ9.eyJ1aWQiOjU0MDAxNTAsInNpZCI6MTI3OTA2LCJleHAiOjE2Mzk0OTE2NzUsInR5cCI6NCwibG9rIjoiMDAwMCIsInRvayI6InU1dmZhNjJzQWd3OWxCSmc2LWJoUVEifQ.-SxwINzK1328MLuqqTiZjrURw9B9z3qJMzvJ54UQlbQ\"\n\n\nconst policyReducer = {\n  name: \"policies\",\n\n  reducer: (state = initialState, action: Action) => {\n    switch (action.type) {\n      case \"FETCH_POLICIES\":\n        console.log(\"We are fetching the policies:- \", action)\n        return {\n          policiesData: action.payload,\n          error: \"\",\n        };\n\n      case \"FETCH_ERRORS\":\n        console.log(\"We are fetching the errors:- \", action)\n        return {\n          policiesData: {},\n          error: action.payload,\n        };\n\n      default:\n        return state;\n    }\n  },\n\n  selectPolicies: (state: { policies: object }) => {\n    console.log(\"State:- \", state)\n    console.log(\"policies:- \", state.policies)\n    return(state.policies)},\n\n  doFetchPolicies:\n    () =>\n    ({ dispatch }: any) => {\n      axios\n        .get(\"https://api.learnyst.com/admin/v4/pages?type=2\", {\n          headers: {\n            Authorization: 'Bearer ' + token\n          }\n        })\n        .then((response) => {\n          const policies = response.data;\n          console.log(\"Got the data:- \", policies);\n          dispatch(fetchPolicies(policies));\n        })\n        .catch((error) => {\n          const errorMsg = error.message;\n          console.log(\"Got the error:- \", errorMsg);\n          dispatch(fetchErrors(errorMsg));\n        });\n    },\n\n  init: (store: { doFetchPolicies: () => void; selectPolicies: () => void }) => {\n    store.doFetchPolicies();\n    store.selectPolicies();\n  },\n};\n\nexport default policyReducer;\n"]},"metadata":{},"sourceType":"module"}